import{v as o,a as p,t as v,h as S}from"../chunks/client-Dcnv723t.js";document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("contact-form");if(!r)return;const n=r.querySelector(".contact-submit-btn"),i=n?.querySelector(".btn-text"),l=n?.querySelector(".btn-loading"),u=document.getElementById("contact-success"),m=document.getElementById("contact-error"),h=document.getElementById("contact-error-message"),L=()=>{r.querySelectorAll(".error-message").forEach(s=>s.classList.add("hidden")),r.querySelectorAll("input, textarea").forEach(s=>{s.classList.remove("border-gold-600","border-gold-700"),s.classList.add("border-charcoal-200")}),m?.classList.add("hidden")},b=(s,t)=>{const e=r.querySelector(`.error-message[data-field="${s}"]`),a=r.querySelector(`[name="${s}"]`);e&&a&&(e.textContent=t,e.classList.remove("hidden"),a.classList.remove("border-charcoal-200"),a.classList.add("border-gold-600"))},E=s=>{const t=r.querySelector(`.error-message[data-field="${s}"]`),e=r.querySelector(`[name="${s}"]`);t&&e&&(t.classList.add("hidden"),e.classList.remove("border-gold-600","border-gold-700"),e.classList.add("border-charcoal-200"))},g=(s,t)=>{let e=null;switch(s){case"name":e=o.name(t);break;case"email":e=o.email(t);break;case"phone":t.trim()&&(e=o.phone(t));break;case"subject":t.trim().length>0&&t.trim().length<5&&(e="Subject must be at least 5 characters");break;case"message":e=o.message(t,10);break}return e?b(s,e):E(s),!e};["name","email","phone","subject","message"].forEach(s=>{const t=r.querySelector(`[name="${s}"]`);t&&(t.addEventListener("blur",()=>{t.value.trim()&&g(s,t.value)}),t.addEventListener("input",()=>{t.classList.contains("border-gold-600")&&g(s,t.value)}))}),r.addEventListener("submit",async s=>{if(s.preventDefault(),L(),r.querySelector('[name="website"]')?.value)return;const e=new FormData(r),a={name:e.get("name"),email:e.get("email"),phone:e.get("phone")||void 0,subject:e.get("subject"),message:e.get("message")};let f=!0;if([["name",o.name(a.name)],["email",o.email(a.email)],["phone",a.phone?o.phone(a.phone):null],["subject",a.subject.trim().length<5?"Subject must be at least 5 characters":null],["message",o.message(a.message,10)]].forEach(([c,d])=>{d&&(b(c,d),f=!1)}),!f)return;let y;n&&i&&l&&(n.disabled=!0,i.classList.add("hidden"),l.classList.remove("hidden"));try{const c=await p({...a,recaptchaToken:y});if(c.success)u?.classList.remove("hidden"),r.reset(),v("contact"),u?.scrollIntoView({behavior:"smooth",block:"center"});else throw new Error(c.error?.message||"Submission failed")}catch(c){const d=S(c);h&&(h.textContent=d),m?.classList.remove("hidden"),m?.scrollIntoView({behavior:"smooth",block:"center"})}finally{n&&i&&l&&(n.disabled=!1,i.classList.remove("hidden"),l.classList.add("hidden"))}})});
