import{v as a,s as L,t as v,h as E}from"../chunks/client-Dcnv723t.js";document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("booking-form");if(!t)return;const n=t.querySelector(".booking-submit-btn"),l=n?.querySelector(".btn-text"),m=n?.querySelector(".btn-loading");document.getElementById("booking-success");const u=document.getElementById("booking-error"),g=document.getElementById("booking-error-message"),b=()=>{t.querySelectorAll(".error-message").forEach(r=>r.classList.add("hidden")),t.querySelectorAll("input, select, textarea").forEach(r=>{r.classList.remove("border-gold-600","border-gold-700"),r.classList.add("border-charcoal-200")}),u?.classList.add("hidden")},d=(r,s)=>{const e=t.querySelector(`.error-message[data-field="${r}"]`),o=t.querySelector(`[name="${r}"]`);e&&o&&(e.textContent=s,e.classList.remove("hidden"),o.classList.remove("border-charcoal-200"),o.classList.add("border-gold-600"))},f=r=>{const s=t.querySelector(`.error-message[data-field="${r}"]`),e=t.querySelector(`[name="${r}"]`);s&&e&&(s.classList.add("hidden"),e.classList.remove("border-gold-600","border-gold-700"),e.classList.add("border-charcoal-200"))},h=(r,s)=>{let e=null;switch(r){case"name":e=a.name(s);break;case"phone":e=a.phone(s);break;case"email":s.trim()&&(e=a.email(s));break;case"address":e=a.address(s);break}return e?d(r,e):f(r),!e};["name","phone","email","address"].forEach(r=>{const s=t.querySelector(`[name="${r}"]`);s&&(s.addEventListener("blur",()=>{s.value.trim()&&h(r,s.value)}),s.addEventListener("input",()=>{s.classList.contains("border-gold-600")&&h(r,s.value)}))}),t.addEventListener("submit",async r=>{if(r.preventDefault(),b(),t.querySelector('[name="website"]')?.value){console.log("Spam detected");return}const e=new FormData(t),o={name:e.get("name"),phone:e.get("phone"),email:e.get("email")||void 0,address:e.get("address"),serviceType:e.get("serviceType"),urgency:e.get("urgency"),notes:e.get("notes")||void 0};let i=!0;if(a.name(o.name)&&(d("name",a.name(o.name)||""),i=!1),a.phone(o.phone)&&(d("phone",a.phone(o.phone)||""),i=!1),o.email&&a.email(o.email)&&(d("email",a.email(o.email)||""),i=!1),a.address(o.address)&&(d("address",a.address(o.address)||""),i=!1),!i)return;let y;n&&l&&m&&(n.disabled=!0,l.classList.add("hidden"),m.classList.remove("hidden"));try{const c=await L({...o,recaptchaToken:y});if(c.success)v("booking"),window.location.href="/thank-you";else throw new Error(c.error?.message||"Submission failed")}catch(c){console.error("Booking form error:",c);const p=E(c);g&&(g.textContent=p),u?.classList.remove("hidden"),u?.scrollIntoView({behavior:"smooth",block:"center"})}finally{n&&l&&m&&(n.disabled=!1,l.classList.remove("hidden"),m.classList.add("hidden"))}})});
